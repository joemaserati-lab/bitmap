
:root{--bg:#fff;--fg:#000;--line:#000;--muted:#666;--chip-bg:#f5f5f5;--safe-top:env(safe-area-inset-top,0px);--safe-right:env(safe-area-inset-right,0px);--safe-bottom:env(safe-area-inset-bottom,0px);--safe-left:env(safe-area-inset-left,0px)}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:JetBrains Mono,monospace;overflow:hidden}
body{display:flex;flex-direction:column;min-height:100dvh}
.topbar{display:flex;align-items:center;min-height:56px;padding:calc(8px + var(--safe-top)) calc(12px + var(--safe-right)) 8px calc(12px + var(--safe-left));border-bottom:1px solid var(--line);font-weight:700}
.layout{flex:1 1 auto;display:flex;flex-direction:column;gap:8px;padding:0 calc(8px + var(--safe-right)) calc(10px + var(--safe-bottom)) calc(8px + var(--safe-left))}
.preview-area{position:sticky;top:calc(var(--safe-top));z-index:2;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-start;padding:calc(8px + var(--safe-top)) 0 8px;background:var(--bg);gap:8px;flex:1 0 auto;min-height:0}
.preview-box{flex:1 1 auto;min-height:220px;width:100%;display:flex;align-items:center;justify-content:center;background:#fff;overflow:hidden;padding:6px;border:1px solid var(--line);border-radius:12px}
#preview .preview-frame{display:flex;align-items:center;justify-content:center;max-width:100%;max-height:100%}
#preview svg,#preview img{width:100%;height:100%;max-width:100%;max-height:100%;image-rendering:pixelated}
.preview-footer{display:flex;align-items:center;justify-content:space-between;gap:8px}
.preview-footer .meta{flex:1;min-width:0;font-size:12px;text-transform:uppercase;letter-spacing:.08em}
.playback-btn{flex:0 0 auto;padding:8px 14px;border:1px solid var(--line);border-radius:999px;background:var(--bg);font-weight:600;text-transform:uppercase;font-size:11px;letter-spacing:.06em;cursor:pointer;transition:background .2s,border-color .2s}
.playback-btn:hover:not([disabled]){background:#f0f0f0}
.playback-btn[hidden]{display:none}
.controls-panel{flex:0 0 auto;display:flex;flex-direction:column;gap:8px;padding:6px 0 4px;border-top:1px solid var(--line);background:#fff}
.controls-top{display:flex;gap:8px;align-items:center;overflow-x:auto;padding:0 0 6px;scroll-snap-type:x mandatory}
.controls-top::-webkit-scrollbar{height:6px}
.file-btn{position:relative;display:inline-flex;align-items:center;justify-content:center;padding:9px 14px;border:1px solid var(--line);border-radius:999px;font-weight:600;cursor:pointer;background:var(--bg);transition:background .2s,border-color .2s,color .2s;text-transform:uppercase;font-size:11px;letter-spacing:.06em;white-space:nowrap;scroll-snap-align:start}
.file-btn:hover{background:#f0f0f0}
.file-btn input{position:absolute;inset:0;opacity:0;cursor:pointer}
.primary-file{min-width:0}
.mobile-only{display:inline-flex}
.dropzone{display:none}
.upload-feedback{display:flex;flex-direction:column;gap:4px;font-size:11px;text-transform:uppercase;letter-spacing:.05em}
.upload-message{font-weight:600;word-break:break-word}
.upload-progress{position:relative;width:100%;height:6px;background:#e6e6e6;border-radius:999px;overflow:hidden}
.upload-progress[hidden]{display:none}
.upload-progress .progress-bar{position:absolute;inset:0 auto 0 0;height:100%;width:0;background:#1a73e8;transition:width .2s ease}
.upload-progress.is-indeterminate .progress-bar{width:40%;animation:uploadPulse 1.2s infinite ease-in-out}
@keyframes uploadPulse{0%{margin-left:-40%}50%{margin-left:20%}100%{margin-left:100%}}
.controls-body{display:flex;gap:10px;overflow-x:auto;padding:0 0 6px;scroll-snap-type:x proximity}
.controls-body::-webkit-scrollbar{height:6px}
.controls-body h3{flex:0 0 auto;margin:0;align-self:flex-start;font-size:12px;text-transform:uppercase;letter-spacing:.1em;padding:10px 14px;border:1px solid var(--line);border-radius:999px;background:var(--bg)}
.field{flex:0 0 auto;min-width:200px;background:var(--chip-bg);border:1px solid #e0e0e0;border-radius:14px;padding:8px;display:flex;flex-direction:column;gap:6px;scroll-snap-align:start}
.field label{font-size:11px;font-weight:600;letter-spacing:.05em;text-transform:uppercase}
.slider{display:flex;gap:8px;align-items:center}
.slider input[type='range']{flex:1;height:2px;background:#000;border-radius:4px}
.num{width:70px;padding:6px;border:1px solid var(--line);border-radius:8px}
.btn-row{display:flex;gap:8px;flex-wrap:nowrap}
.btn-row button{flex:1 1 auto;padding:9px;border:1px solid var(--line);border-radius:999px;font-weight:600;text-transform:uppercase;font-size:11px;letter-spacing:.06em;background:var(--bg);cursor:pointer;transition:background .2s,border-color .2s}
.btn-row button.secondary{flex:0 0 auto}
.btn-row button:hover:not([disabled]){background:#f0f0f0}
.btn-row button[disabled]{opacity:0.5;cursor:not-allowed}
hr{border:0;border-top:1px solid #eee;margin:0;flex:0 0 auto;align-self:stretch;display:none}
.muted{color:var(--muted);font-size:11px;text-transform:uppercase;letter-spacing:.08em}
.desktop-only{display:none}

@media (min-width:900px){
  body{min-height:100vh}
  .layout{flex-direction:row;min-height:calc(100vh - 56px);padding:16px}
  .preview-area{position:relative;flex:1;padding:0 16px 0 0;border-right:1px solid var(--line);gap:16px;background:transparent}
  .preview-box{height:100%;min-height:0;padding:12px;border-radius:16px}
  .controls-panel{width:380px;border-top:0;border-left:1px solid var(--line);height:100%;overflow:hidden;padding:0 0 0 16px;gap:12px}
  .controls-top{flex-wrap:wrap;overflow:visible;padding:0}
  .mobile-only{display:none}
  .desktop-only{display:flex}
  .dropzone{display:flex;flex:1 1 100%;align-items:center;justify-content:center;border:1px dashed var(--line);padding:12px;border-radius:12px;text-align:center;font-weight:600;text-transform:uppercase;font-size:12px;letter-spacing:.06em;cursor:pointer;transition:background .2s,border-color .2s}
  .dropzone:hover,.dropzone:focus-visible{outline:none;background:#f0f0f0;border-color:#333}
  .dropzone.is-dragover{background:#e6f3ff;border-color:#1a73e8}
  .controls-body{flex-direction:column;overflow-x:hidden;overflow-y:auto;padding:0;margin-right:-8px;padding-right:8px;gap:12px}
  .controls-body::-webkit-scrollbar{width:8px;height:auto}
  .controls-body::-webkit-scrollbar-thumb{background:#ccc;border-radius:999px}
  .controls-body h3{border-radius:12px;padding:0;margin:8px 0 0 0;border:0;text-transform:none;letter-spacing:0;font-size:14px;font-weight:700;background:transparent}
  .field{min-width:0}
  hr{display:block;margin:8px 0}
  .btn-row{flex-wrap:wrap}
}
